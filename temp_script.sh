#!/bin/bash

#charmed
# ./create_wmfod_figures.sh \
# /Volumes/Amr_1TB/DTI_corr/Diffusion_TBSS_Stat/DTI_TBSS_workingdir_Study_Based_Template/DTI_TBSS_Study/_map_id_CHARMED_FA/palm_tbss/palm_tbss_tfce_tstat_fwep_c1.nii.gz \
# tbss
#
#
# ./create_wmfod_figures.sh \
# /Volumes/Amr_1TB/DTI_corr/Diffusion_TBSS_Stat/DTI_TBSS_workingdir_Study_Based_Template/DTI_TBSS_Study/_map_id_CHARMED_FR/palm_tbss/palm_tbss_tfce_tstat_fwep_c1.nii.gz \
# tbss
#
#
# ./create_wmfod_figures.sh \
# /Volumes/Amr_1TB/DTI_corr/Diffusion_TBSS_Stat/DTI_TBSS_workingdir_Study_Based_Template/DTI_TBSS_Study/_map_id_CHARMED_IAD/palm_tbss/palm_tbss_tfce_tstat_fwep_c1.nii.gz \
# tbss
#
# #=====================================================================
#
# ./create_wmfod_figures.sh \
# /Users/amr/Dropbox/thesis/diffusion/DTI_corr/EPM_open_to_close_ratio.con_EPM_open_to_close_ratio.mat/CHARMED_IAD_P_value1.nii.gz \
# behavior
#
#
#
# ./create_wmfod_figures.sh \
# /Users/amr/Dropbox/thesis/diffusion/DTI_corr/EPM_time_in_opened_arms_percent.con_EPM_time_in_opened_arms_percent.mat/CHARMED_IAD_P_value1.nii.gz \
# behavior
#
#
# ./create_wmfod_figures.sh \
# /Users/amr/Dropbox/thesis/diffusion/DTI_corr/EPM_time_in_opened_arms.con_EPM_time_in_opened_arms.mat/CHARMED_IAD_P_value1.nii.gz \
# behavior
#
#
#
# ./create_wmfod_figures.sh \
# /Users/amr/Dropbox/thesis/diffusion/DTI_corr/EPM_total_distance.con_EPM_total_distance.mat/CHARMED_FR_P_value2.nii.gz \
# behavior
#
#
# ./create_wmfod_figures.sh \
# /Users/amr/Dropbox/thesis/diffusion/DTI_corr/EPM_velocity.con_EPM_velocity.mat/CHARMED_FR_P_value2.nii.gz \
# behavior
#
#
# ./create_wmfod_figures.sh \
# /Users/amr/Dropbox/thesis/diffusion/DTI_corr/OF_center_corners_ratio.con_OF_center_corners_ratio.mat/CHARMED_FA_P_value1.nii.gz \
# behavior
#
#
#
# ./create_wmfod_figures.sh \
# /Users/amr/Dropbox/thesis/diffusion/DTI_corr/OF_percent_in_center.con_OF_percent_in_center.mat/CHARMED_FA_P_value1.nii.gz \
# behavior
#
#
# ./create_wmfod_figures.sh \
# /Users/amr/Dropbox/thesis/diffusion/DTI_corr/OF_total_distance.con_OF_total_distance.mat/CHARMED_FA_P_value1.nii.gz \
# behavior
#
#
#
# ./create_wmfod_figures.sh \
# /Users/amr/Dropbox/thesis/diffusion/DTI_corr/OF_velocity.con_OF_velocity.mat/CHARMED_FA_P_value1.nii.gz \
# behavior
#
#
# ./create_wmfod_figures.sh \
# /Users/amr/Dropbox/thesis/diffusion/DTI_corr/OF_velocity.con_OF_velocity.mat/CHARMED_FA_P_value1.nii.gz \
# behavior
#

######################################################################################################
# NODDI

# ./create_wmfod_figures.sh \
# /Volumes/Amr_1TB/DTI_corr/Diffusion_TBSS_Stat/DTI_TBSS_workingdir_Study_Based_Template/DTI_TBSS_Study/_map_id_NODDI_FICVF/palm_tbss/palm_tbss_tfce_tstat_fwep_c1.nii.gz \
# tbss
#
#
#
# ./create_wmfod_figures.sh \
# /Users/amr/Dropbox/thesis/diffusion/DTI_corr/EPM_open_to_close_ratio.con_EPM_open_to_close_ratio.mat/NODDI_FICVF_P_value2.nii.gz \
# behavior

######################################################################################################
# Kurtosis

# ./create_wmfod_figures.sh \
# /Volumes/Amr_1TB/DTI_corr/Diffusion_TBSS_Stat/DTI_TBSS_workingdir_Study_Based_Template/DTI_TBSS_Study/_map_id_Kurtosis_E_DTI_FA/palm_tbss/palm_tbss_tfce_tstat_fwep_c1.nii.gz \
# tbss
#
#
#
# ./create_wmfod_figures.sh \
# /Users/amr/Dropbox/thesis/diffusion/DTI_corr/OF_total_distance.con_OF_total_distance.mat/Kurtosis_E_DTI_FA_P_value1.nii.gz \
# behavior
#
#
# ./create_wmfod_figures.sh \
# /Users/amr/Dropbox/thesis/diffusion/DTI_corr/OF_total_distance.con_OF_total_distance.mat/Kurtosis_AK_P_value2.nii.gz \
# behavior
#
#
# ./create_wmfod_figures.sh \
# /Users/amr/Dropbox/thesis/diffusion/DTI_corr/OF_total_distance.con_OF_total_distance.mat/Kurtosis_AWF_P_value2.nii.gz \
# behavior
#
#
#
# ./create_wmfod_figures.sh \
# /Users/amr/Dropbox/thesis/diffusion/DTI_corr/OF_total_distance.con_OF_total_distance.mat/Kurtosis_E_DTI_RD_P_value2.nii.gz \
# behavior
#
#
#
# ./create_wmfod_figures.sh \
# /Users/amr/Dropbox/thesis/diffusion/DTI_corr/OF_total_distance.con_OF_total_distance.mat/Kurtosis_MK_P_value2.nii.gz \
# behavior
#
#
#
# ./create_wmfod_figures.sh \
# /Users/amr/Dropbox/thesis/diffusion/DTI_corr/OF_total_distance.con_OF_total_distance.mat/Kurtosis_RD_P_value2.nii.gz \
# behavior
#
#
# ./create_wmfod_figures.sh \
# /Users/amr/Dropbox/thesis/diffusion/DTI_corr/OF_total_distance.con_OF_total_distance.mat/Kurtosis_TORT_P_value1.nii.gz \
# behavior

###################################################################################
# using FA study based template
# TBSS
# first get the maps with significant values
# change directory to the scripts directory so, ./create_FA_study_figures.sh could work
cd /Users/amr/Dropbox/SCRIPTS/Diffusion_MRI_Analysis
for img in `ls /Volumes/Amr_1TB/DTI_corr/Diffusion_TBSS_Stat/DTI_TBSS_workingdir_Study_Based_Template/DTI_TBSS_Study/*/palm_tbss/*_tbss_tfce_tstat_fwep_c*.nii.gz`;do
    sig=`fslstats $img -p 100`;
    if [[ "${sig}" > 0.949 ]];then
    	echo $img
        ./create_FA_study_figures.sh $img tbss
    fi
done
###################################################################################
# result: tbss_maps with significant voxels
# /Volumes/Amr_1TB/DTI_corr/Diffusion_TBSS_Stat/DTI_TBSS_workingdir_Study_Based_Template/DTI_TBSS_Study/_map_id_CHARMED_FA/palm_tbss/palm_tbss_tfce_tstat_fwep_c1.nii.gz
# /Volumes/Amr_1TB/DTI_corr/Diffusion_TBSS_Stat/DTI_TBSS_workingdir_Study_Based_Template/DTI_TBSS_Study/_map_id_CHARMED_FA/palm_tbss/palm_tbss_tfce_tstat_fwep_c2.nii.gz
# /Volumes/Amr_1TB/DTI_corr/Diffusion_TBSS_Stat/DTI_TBSS_workingdir_Study_Based_Template/DTI_TBSS_Study/_map_id_CHARMED_FR/palm_tbss/palm_tbss_tfce_tstat_fwep_c1.nii.gz
# /Volumes/Amr_1TB/DTI_corr/Diffusion_TBSS_Stat/DTI_TBSS_workingdir_Study_Based_Template/DTI_TBSS_Study/_map_id_CHARMED_IAD/palm_tbss/palm_tbss_tfce_tstat_fwep_c1.nii.gz
# /Volumes/Amr_1TB/DTI_corr/Diffusion_TBSS_Stat/DTI_TBSS_workingdir_Study_Based_Template/DTI_TBSS_Study/_map_id_CHARMED_IAD/palm_tbss/palm_tbss_tfce_tstat_fwep_c2.nii.gz
# /Volumes/Amr_1TB/DTI_corr/Diffusion_TBSS_Stat/DTI_TBSS_workingdir_Study_Based_Template/DTI_TBSS_Study/_map_id_Diffusion_20_AD/palm_tbss/palm_tbss_tfce_tstat_fwep_c2.nii.gz
# /Volumes/Amr_1TB/DTI_corr/Diffusion_TBSS_Stat/DTI_TBSS_workingdir_Study_Based_Template/DTI_TBSS_Study/_map_id_Diffusion_20_FA/palm_tbss/palm_tbss_tfce_tstat_fwep_c1.nii.gz
# /Volumes/Amr_1TB/DTI_corr/Diffusion_TBSS_Stat/DTI_TBSS_workingdir_Study_Based_Template/DTI_TBSS_Study/_map_id_Diffusion_20_FA/palm_tbss/palm_tbss_tfce_tstat_fwep_c2.nii.gz
# /Volumes/Amr_1TB/DTI_corr/Diffusion_TBSS_Stat/DTI_TBSS_workingdir_Study_Based_Template/DTI_TBSS_Study/_map_id_Diffusion_20_MD/palm_tbss/palm_tbss_tfce_tstat_fwep_c2.nii.gz
# /Volumes/Amr_1TB/DTI_corr/Diffusion_TBSS_Stat/DTI_TBSS_workingdir_Study_Based_Template/DTI_TBSS_Study/_map_id_Diffusion_20_RD/palm_tbss/palm_tbss_tfce_tstat_fwep_c2.nii.gz
# /Volumes/Amr_1TB/DTI_corr/Diffusion_TBSS_Stat/DTI_TBSS_workingdir_Study_Based_Template/DTI_TBSS_Study/_map_id_Kurtosis_E_DTI_FA/palm_tbss/palm_tbss_tfce_tstat_fwep_c1.nii.gz
# /Volumes/Amr_1TB/DTI_corr/Diffusion_TBSS_Stat/DTI_TBSS_workingdir_Study_Based_Template/DTI_TBSS_Study/_map_id_Kurtosis_E_DTI_FA/palm_tbss/palm_tbss_tfce_tstat_fwep_c2.nii.gz
# /Volumes/Amr_1TB/DTI_corr/Diffusion_TBSS_Stat/DTI_TBSS_workingdir_Study_Based_Template/DTI_TBSS_Study/_map_id_NODDI_FICVF/palm_tbss/palm_tbss_tfce_tstat_fwep_c1.nii.gz
# /Volumes/Amr_1TB/DTI_corr/Diffusion_TBSS_Stat/DTI_TBSS_workingdir_Study_Based_Template/DTI_TBSS_Study/_map_id_NODDI_ODI/palm_tbss/palm_tbss_tfce_tstat_fwep_c1.nii.gz
# /Volumes/Amr_1TB/DTI_corr/Diffusion_TBSS_Stat/DTI_TBSS_workingdir_Study_Based_Template/DTI_TBSS_Study/_map_id_NODDI_ODI/palm_tbss/palm_tbss_tfce_tstat_fwep_c2.nii.gz

##################################################################################
# I have put all the significant correlation maps in this directory: /Users/amr/Dropbox/thesis/diffusion/DTI_corr/ under
# multiple subdirectories
# TODO: continue with behavior

# loop over the images to create the figures
cd /Users/amr/Dropbox/SCRIPTS/Diffusion_MRI_Analysis
for img in `ls /Users/amr/Dropbox/thesis/diffusion/DTI_corr/*/*_P_value*.nii.gz`;do
    sig=`fslstats $img -p 100`;
    if [[ "${sig}" > 0.949 ]];then
    	echo $img
        ./create_FA_study_figures.sh $img behavior
    fi
done
